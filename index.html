<!doctype html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard - An√°lise de T√°xis NY</title>
    
    <style>
      /* --- Configura√ß√£o Geral --- */
      body {
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
        background-color: #f4f7f6; /* Fundo cinza claro */
        color: #333;
        margin: 0;
        padding: 20px;
      }

      #app {
        max-width: 1400px; /* Largura m√°xima do dashboard */
        margin: 0 auto;
        padding: 25px;
        background-color: #ffffff;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.05); /* Sombra suave */
      }

      /* --- T√≠tulos --- */
      h1 {
        text-align: center;
        color: #1a202c;
        border-bottom: 2px solid #f0f0f0;
        padding-bottom: 15px;
        margin-top: 0;
      }
      
      h2 {
        color: #2d3748;
        border-bottom: 1px solid #eee;
        padding-bottom: 8px;
        margin-top: 30px; /* Espa√ßamento entre se√ß√µes */
      }

      /* --- Controles (Input + Bot√£o) --- */
      .controls {
        display: flex;
        gap: 15px;
        align-items: center;
        flex-wrap: wrap; /* Para telas menores */
        margin-bottom: 20px;
        padding: 15px;
        background-color: #fdfdfd;
        border-radius: 6px;
        border: 1px solid #eee;
      }

      #process-button {
        padding: 10px 18px;
        font-size: 15px;
        font-weight: 600;
        background-color: #007bff; /* Azul prim√°rio */
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.2s;
      }

      #process-button:disabled {
        background-color: #ccc;
        cursor: not-allowed;
      }

      #process-button:not(:disabled):hover {
        background-color: #0056b3;
      }
      
      /* Estiliza o "bot√£o" dentro do input de arquivo */
      input[type="file"]::file-selector-button {
        padding: 10px 18px;
        font-size: 15px;
        font-weight: 600;
        background-color: #6c757d; /* Cinza secund√°rio */
        color: white;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        transition: background-color 0.2s;
      }

      input[type="file"]::file-selector-button:hover {
        background-color: #5a6268;
      }

      /* --- Output (Log) --- */
      #output {
        background-color: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 5px;
        padding: 15px;
        white-space: pre-wrap; /* Quebra de linha */
        word-wrap: break-word;
        max-height: 150px;
        overflow-y: auto; /* Scroll se for muito longo */
        font-size: 14px;
        color: #495057;
      }

      /* --- Se√ß√µes dos Gr√°ficos --- */
      .chart-section {
        margin-top: 20px;
      }
      
      /* üõë CORRE√á√ÉO: Aplica largura total APENAS aos gr√°ficos de Linha e Barra */
      #temporal-chart-container svg,
      #monthly-bar-chart-container svg { 
          width: 100%; 
          height: auto; 
          
      }
      /* Os SVGs do Heatmap e Donut agora usar√£o o 'margin: 0 auto' aplicado no charts.js */
      
      /* üõë REMOVIDO: .chart-grid 
         Os gr√°ficos agora empilhar√£o verticalmente por padr√£o. */
      

      /* --- Estilo para as tabelas de amostra (Oculto) --- */
      #results-section {
        display: none; /* üõë ADICIONADO: Oculta a se√ß√£o inteira */
      }
      
      #results table {
        margin: 20px 0;
        border-collapse: collapse;
        font-size: 14px;
        width: 100%;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
      }
      #results th, #results td {
        border: 1px solid #ddd;
        padding: 8px 12px;
        text-align: left;
      }
      #results th {
        background-color: #f9f9f9;
        font-weight: 600;
      }
      #results tr:nth-child(even) {
        background-color: #fdfdfd;
      }
    </style>

  </head>
  <body>
    <div id="app">
        <!-- T√≠tulo Principal -->
        <h1>Dashboard de An√°lise de Corridas de T√°xi em NY (2019-2022)</h1>
        
        <!-- Se√ß√£o de Controles -->
        <div class="controls">
          <p>Selecione os arquivos Parquet (.parquet) para iniciar:</p>
          <input type="file" id="parquet-files-input" multiple>
          <button id="process-button" disabled>Processar e Gerar An√°lises</button>
        </div>
        
        <!-- Log de Status -->
        <pre id="output">Pronto para processar. Por favor, selecione os arquivos...</pre>
        
        <!-- Se√ß√£o: Gr√°fico de Linha (Largo) -->
        <section class="chart-section">
          <h2>Varia√ß√£o Temporal Di√°ria</h2>
          <div id="temporal-chart-container"></div> 
        </section>

        <!-- Se√ß√£o: Gr√°fico de Barras (Largo) -->
        <section class="chart-section">
          <h2>Sazonalidade Mensal</h2>
          <div id="monthly-bar-chart-container"></div>
        </section>

        <!-- üõë REMOVIDO: <div class="chart-grid"> -->
          
          <!-- Se√ß√£o: Heatmap (agora em pilha) -->
          <section class="chart-section">
            <h2>Padr√µes por Hora e Dia da Semana</h2>
            <div id="heatmap-chart-container"></div>
          </section>
          
          <!-- Se√ß√£o: Donut (agora em pilha) -->
          <section class="chart-section">
            <h2>Composi√ß√£o por Tipo de Pagamento</h2>
            <div id="donut-chart-container"></div>
          </section>

        <!-- üõë REMOVIDO: </div> (fechamento do chart-grid) -->
        
        <!-- Se√ß√£o: Tabelas de Amostra (Oculta) -->
        <section class="chart-section" id="results-section">
          <h2>Amostra dos Dados Agregados</h2>
          <div id="results"></div> 
        </section>
    </div>
    
    <script type="module" src="/src/main.js"></script>
  </body>
</html>